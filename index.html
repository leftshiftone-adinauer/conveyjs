<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>gaia-js-sdk-convey</title>
    <script src="dist/gaia-js-sdk-convey.min.js"></script>
    <link rel="stylesheet" href="dist/gaia-js-sdk-convey.min.css">
</head>
<body>

<div class="gaia">
    <div class="gaia-chat">
        <div class="messages lto-scrollbar"></div>
        <div class="lto-control" id="chat-control">
            <textarea title="" class="messageInput" id="chat-messageInput"></textarea>
            <button class="sendButton" id="chat-sendButton"></button>
        </div>
    </div>
</div>

</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const renderer = new GaiaSDK.ClassicRenderer(document.getElementsByClassName('lto-scrollbar')[0]);

        let gaia = new GaiaSDK.Gaia(renderer);
        gaia.connect('ws://localhost:61616/channel', '1337')
            .then(connection => {
                connection.bind(new GaiaSDK.KeyboardBehaviour(document.getElementById('chat-messageInput')));
                connection.bind(new GaiaSDK.MouseBehaviour(document.getElementById('chat-sendButton')));

                connection.subscribe(GaiaSDK.ChannelType.TEXT, (e) => console.log('Text: ' + e));
                connection.reception();
            });

    });
</script>
</html>
